"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[130],{82130:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"application-manage"}},[t("el-row",[t("el-col",{attrs:{span:22}},[t("el-input",{attrs:{placeholder:"请输入名称",type:"text"},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),t("el-col",{attrs:{span:2}},[t("el-button",{attrs:{type:"primary"},on:{click:e.setQueryName}},[e._v("搜索")])],1)],1),t("el-table",{attrs:{data:e.tableData,id:"gbox",useIndex:!0,stripe:!0,border:!0,fit:!0,useMultiSelect:!1}},e._l(e.columns,(function(a,r){return t("el-table-column",{key:r,attrs:{label:a.label,prop:a.prop,width:a.width,align:"center"},scopedSlots:e._u([{key:"default",fn:function({column:a,row:r}){return["status"===a.property?t("div",[t("el-tag",{attrs:{type:e._f("statusColor")(r[a.property])}},[e._v(e._s(e._f("status")(r[a.property]))+" ")])],1):"opts"===a.property?t("div",[t("el-button",{attrs:{type:"success",disabled:-1===[0,2,3,6].indexOf(r["status"])},on:{click:function(t){return e.showEdit(r)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.delLoan(r.id)}}},[e._v("删除")]),t("el-button",{attrs:{type:"success",disabled:-1===[0,2,3,6].indexOf(r["status"])},on:{click:function(t){return e.submit(r.id)}}},[e._v("提交审核")])],1):t("div",[e._v(" "+e._s(r[a.property])+" ")])]}}],null,!0)})})),1),t("el-dialog",{attrs:{title:"申请管理-编辑",visible:e.dialogVisible,width:"30%"},on:{close:function(t){e.dialogVisible=!1}}},[t("div",{staticClass:"form-box"},[t("el-form",{ref:"updateForm",attrs:{model:e.updateForm,rules:e.rules,"label-width":"80px"}},[t("el-row",[t("el-col",{attrs:{xl:20,lg:20,md:12,sm:24,xs:24}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{type:"input"},model:{value:e.updateForm.name,callback:function(t){e.$set(e.updateForm,"name",t)},expression:"updateForm.name"}})],1)],1),t("el-col",{attrs:{xl:20,lg:20,md:12,sm:24,xs:24}},[t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-select",{model:{value:e.updateForm.sex,callback:function(t){e.$set(e.updateForm,"sex",t)},expression:"updateForm.sex"}},[t("el-option",{key:"man",attrs:{label:"男",value:"man"}}),t("el-option",{key:"woman",attrs:{label:"女",value:"woman"}})],1)],1)],1)],1)],1),t("div",{staticClass:"btns clear-fix"},[t("div",[t("el-button",{attrs:{type:"primary"},on:{click:e.submitUpdate}},[e._v("提交")]),t("el-button",{on:{click:e.cleanFrom}},[e._v("重置")])],1)])],1)]),t("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":e.pageOptions.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.rows},on:{"current-change":e.handleCurrentChange,"size-change":e.updateSize}})],1)},s=[],n=a(76897),o={filters:{statusColor(e){switch(e){case 0:return"success";case 1:return"";case 2:return"success";case 3:return"danger";case 4:return"warning";case 5:return"success";case 6:return"danger";case 7:return"success";default:return"danger"}},status(e){switch(e){case 0:return"进件";case 1:return"提交初审";case 2:return"初审通过";case 3:return"初审拒绝";case 4:return"提交终审";case 5:return"终审通过";case 6:return"终审拒绝";case 7:return"生成合同";default:return"出错了"}}},data(){return{pageOptions:{pageNo:1,pageSize:10},dialogVisible:!1,updateForm:{id:0,name:"",sex:""},rules:{name:[{required:!0,message:"请输入用户名"}],sex:[{required:!0,message:"请输入性别"}]},query:"",rows:0,tableData:[],columns:[{label:"姓名",prop:"name",width:"80"},{label:"出生日期",prop:"birthday",width:"160"},{label:"性别",prop:"sex"},{label:"教育程度",prop:"education"},{label:"居住地址",prop:"address1"},{label:"手机号",prop:"mobile_phone"},{label:"申请状态",prop:"status"},{label:"操作",width:"280",prop:"opts"}]}},methods:{updateSize(e){this.pageOptions.pageSize=e,this.getLoanList(),console.log(`现在是${e}条每页`)},handleCurrentChange(e){this.pageOptions.pageNo=e,this.getLoanList(),console.log(e)},showEdit(e){console.log(e,"row为申请表单输入的值"),this.dialogVisible=!0,this.$nextTick((()=>{this.updateForm.id=e.id,this.updateForm.name=e.name,this.updateForm.sex=e.sex}))},async submitUpdate(){let e=await(0,n.Qf)(this.updateForm);2e4===e.data.code&&(this.dialogVisible=!1,this.getLoanList())},cleanFrom(){this.$refs.updateForm.resetFields()},async delLoan(e){let t=await(0,n.sv)(e);2e4===t.data.code&&this.getLoanList(),console.log(e),console.log(t)},async submit(e){let t=await(0,n.P8)(e);2e4===t.data.code&&this.getLoanList(),console.log(t,"审核")},async setQueryName(){this.pageOptions.name=this.query,await this.getLoanList(),this.pageOptions.name=null},getBirthday(e){let t=new Date(e);function a(e){return e<10?"0"+e:e}let r=t.getFullYear(),s=a(t.getMonth()+1),n=a(t.getDate()),o=a(t.getHours()),l=a(t.getMinutes()),i=a(t.getSeconds()),u=r+"-"+s+"-"+n+" "+o+":"+l+":"+i;return u},getSex(e){return"man"===e?"男":"女"},getEducation(e){return"college"===e?"大学":"高中"},async getLoanList(){let e=await(0,n.MX)(this.pageOptions);2e4===e?.data?.code&&(this.tableData=e.data.data.data.data.map((e=>(e.birthday=this.getBirthday(e.birthday),e.sex=this.getSex(e.sex),e.education=this.getEducation(e.education),e)))),this.rows=e?.data?.data?.rows,console.log(e)}},mounted(){this.getLoanList()}},l=o,i=a(1001),u=(0,i.Z)(l,r,s,!1,null,null,null),d=u.exports},76897:function(e,t,a){a.d(t,{Et:function(){return c},Jz:function(){return m},MX:function(){return n},P8:function(){return i},Qf:function(){return o},Vb:function(){return d},ao:function(){return g},cG:function(){return h},et:function(){return u},iZ:function(){return p},sv:function(){return l},tX:function(){return s}});var r=a(84471);const s=e=>(0,r.Z)({url:"/loan/create",method:"POST",data:e}),n=e=>(0,r.Z)({url:"/loan/list",method:"get",params:e}),o=e=>(0,r.Z)({url:"/loan/update/",method:"PUT",data:e}),l=e=>(0,r.Z)({url:"/loan/delete/"+e,method:"DELETE"}),i=e=>(0,r.Z)({url:"/loan/submitToApprove",method:"POST",data:{id:e}}),u=e=>(0,r.Z)({url:"/approve/first/list",method:"get",params:e}),d=(e,t)=>(0,r.Z)({url:"/approve/first/"+t,method:"post",data:{loanId:e,appId:e}}),c=e=>(0,r.Z)({url:"/approve/end/list",method:"get",params:e}),p=(e,t)=>(0,r.Z)({url:"/approve/end/"+t,method:"post",data:{loanId:e,appId:e}}),m=e=>(0,r.Z)({url:"/contract/list",method:"get",params:e}),g=e=>(0,r.Z)({url:"/contract/createFile",method:"post",data:{id:e}}),h=e=>(0,r.Z)({url:"/contract/download",method:"get",params:{id:e}})}}]);
//# sourceMappingURL=130.d62d6d69.js.map