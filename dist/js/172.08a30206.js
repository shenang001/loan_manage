"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[172],{15172:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var n=function(){var t=this,e=t._self._c;return e("div",[e("el-row",[e("el-col",{attrs:{span:22}},[e("el-input",{attrs:{placeholder:"请输入名称",type:"text"},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),e("el-col",{attrs:{span:2}},[e("el-button",{attrs:{type:"primary"},on:{click:t.setQueryName}},[t._v("搜索")])],1)],1),e("el-table",{attrs:{data:t.tableData,id:"gbox",useIndex:!0,stripe:!0,border:!0,fit:!0,useMultiSelect:!1}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),t._l(t.columns,(function(a,n){return e("el-table-column",{key:n,attrs:{label:a.label,prop:a.prop,width:a.width,align:"center"},scopedSlots:t._u([{key:"default",fn:function({column:a,row:n}){return["opts"===a.property?e("div",[e("el-button",{attrs:{disabled:n["status"]>5,type:"primary"},on:{click:function(e){return t.createContract(n.id)}}},[t._v(" 生成合同")]),e("el-button",{attrs:{disabled:7!==n["status"],type:"success"},on:{click:function(e){return t.downContract(n.id)}}},[t._v("下载合同")])],1):"status"===a.property?e("div",[e("el-tag",{attrs:{type:7===n[a.property]?"success":""}},[t._v(" "+t._s(7===n[a.property]?"生成合同":"未生成合同")+" ")])],1):e("div",[t._v(" "+t._s(n[a.property])+" ")])]}}],null,!0)})}))],2),e("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":t.pageOptions.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.rows},on:{"current-change":t.handleCurrentChange,"size-change":t.updateSize}})],1)},r=[],o=(a(46229),a(17330),a(62062),a(76897)),i=a(84471),l={data(){return{query:"",tableData:[],rows:0,pageOptions:{pageNo:1,pageSize:10},pageOptions:{pageNo:1,pageSize:10},columns:[{label:"姓名",prop:"name",width:"100"},{label:"身份证",prop:"identity_card",width:"260"},{label:"合同状态",prop:"status",width:"160"},{label:"操作",prop:"opts"}]}},methods:{async createContract(t){let e=await(0,o.ao)(t);console.log("合同生成成功"),2e4===e.data.code&&this.getContractList()},async downContract(t){let e=await(0,o.cG)(t);if(2e4===e.data.code){let a=e.data.data.url.replace("/api",""),n="贷款合同-"+t+".docx",r=await(0,i.Z)({url:a,responseType:"blob"}),o=window.URL.createObjectURL(r.data),l=document.createElement("a");l.href=o,l.download=n,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(a)}},async setQueryName(){this.pageOptions.name=this.query,await this.getContractList(),this.pageOptions.name=null},handleCurrentChange(t){this.pageOptions.pageNo=t,this.getContractList()},updateSize(t){this.pageOptions.pageSize=t,this.getContractList()},async getContractList(){let t=await(0,o.Jz)(this.pageOptions);2e4===t.data.code&&(this.tableData=t.data.data.data.data,this.rows=t.data.data.rows)}},mounted(){this.getContractList()}},s=l,p=a(1001),u=(0,p.Z)(s,n,r,!1,null,"0814901e",null),d=u.exports},76897:function(t,e,a){a.d(e,{Et:function(){return d},Jz:function(){return h},MX:function(){return o},P8:function(){return s},Qf:function(){return i},Vb:function(){return u},ao:function(){return g},cG:function(){return m},et:function(){return p},iZ:function(){return c},sv:function(){return l},tX:function(){return r}});var n=a(84471);const r=t=>(0,n.Z)({url:"/loan/create",method:"POST",data:t}),o=t=>(0,n.Z)({url:"/loan/list",method:"get",params:t}),i=t=>(0,n.Z)({url:"/loan/update/",method:"PUT",data:t}),l=t=>(0,n.Z)({url:"/loan/delete/"+t,method:"DELETE"}),s=t=>(0,n.Z)({url:"/loan/submitToApprove",method:"POST",data:{id:t}}),p=t=>(0,n.Z)({url:"/approve/first/list",method:"get",params:t}),u=(t,e)=>(0,n.Z)({url:"/approve/first/"+e,method:"post",data:{loanId:t,appId:t}}),d=t=>(0,n.Z)({url:"/approve/end/list",method:"get",params:t}),c=(t,e)=>(0,n.Z)({url:"/approve/end/"+e,method:"post",data:{loanId:t,appId:t}}),h=t=>(0,n.Z)({url:"/contract/list",method:"get",params:t}),g=t=>(0,n.Z)({url:"/contract/createFile",method:"post",data:{id:t}}),m=t=>(0,n.Z)({url:"/contract/download",method:"get",params:{id:t}})}}]);
//# sourceMappingURL=172.08a30206.js.map